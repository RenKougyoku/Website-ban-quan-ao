@using webmaylanh.Models
@model List<ItemGioHang>
@{
    ViewBag.Title = "DatHang";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<h2 style="text-align: center">THÔNG TIN HÀNG HÓA</h2>
<table align="center" border="1" class=" table table-striped table-bordered table table-condensed">
    <tr style="text-align:center; font-weight:bold">
        <td>Mã sản phẩm</td>
        <td>Tên sản phẩm</td>
        <td>Hình Ảnh</td>
        <td>Số Lượng</td>
        <td>Đơn Giá</td>
        <td>Giảm Giá</td>
        <td>Thành Tiền</td>
    </tr>
    @{
        double? total = 0;
    }
    @foreach (var item in Model)
    {
        var thanhtien = item.SoLuong * item.DonGia * (1 - item.GiamGia);
        total += thanhtien;
        <tr style="text-align:center; font-weight:bold">
            <td>@item.SanPhamID</td>
            <td>@item.TenSanPham</td>
            <td><img src="@Url.Content("~/" +item.HinhAnh)" style="height:200px;width:150px" /></td>
            <td>@item.SoLuong</td>
            <td>@string.Format("{0:0,0 VNĐ}", item.DonGia).Replace(",", ".")</td>
            <td>@Html.FormatValue(item.GiamGia, "{0:p}")</td>
            <td>@string.Format("{0:0,0 VNĐ}", item.TongTien).Replace(",", ".")</td>
        </tr>
    }
    <tr style="font-weight:bold; color:blue; text-align:right">
        <td colspan="10">
            <strong>Tổng tiền: @string.Format("{0:0,0 VNĐ}", total).Replace(",", ".")</strong>
        </td>
    </tr>
    <tr>
        <td colspan="10" style="font-weight:bold;font-size:15px;">@Html.ActionLink("« Chỉnh sửa hàng hóa", "XemGioHang", "Giohang")</td>
    </tr>
</table>

@{
    KhachHang kh = (KhachHang)Session["TaiKhoan"];
}
<table align="center">
    @using (Html.BeginForm())
    {
        @*@Html.ValidationSummary(true)*@
    <tr style="border-bottom:1px solid grey;">
        <td colspan="3" style="color:green;font-weight:bold;"><h2>THÔNG TIN KHÁCH HÀNG</h2></td>
    </tr>
    <tr>
        <td style="padding:30px 5px 5px 5px; font-weight:bold;">Khách hàng:</td>
        <td style="padding:30px 5px 5px 5px; color:#df1f26;">@kh.HoTen</td>
    </tr>
    <tr>
        <td style="padding:5px; font-weight:bold;">Địa chỉ:</td>
        <td style="padding:5px; color:#df1f26;">@kh.DiaChi</td>
    </tr>
    <tr>
        <td style="padding:5px; font-weight:bold;">Điện thoại:</td>
        <td style="padding:5px; color:#df1f26;">@kh.DienThoai</td>
    </tr>
    <tr>
        <td style="padding:5px; font-weight:bold;">Ngày đặt:</td>
        <td style="padding:5px; color:blue; font-weight:bold;">@DateTime.Now.ToShortDateString() (Hôm nay)</td>
    </tr>
    <tr>
        <td style="padding:5px; font-weight:bold;">Ngày giao hàng:</td>
        <td style="padding:5px;"><input type="date" id="datePicker" name="NgayGiao" /></td>
        <td style="padding:5px; font-size:13px;"><i>(*Tùy chỉnh ngày giao hàng)</i></td>
    </tr>
    <tr style="border-bottom:1px solid grey;">
        <td style="padding:5px 5px 30px 5px; font-weight:bold;">Ghi chú</td>
        <td style="padding:5px 5px 30px 5px;"><input type="text" name="GhiChu" /></td>
    </tr>
    <tr>
        <td><input type="Submit" value="Đồng ý đặt hàng" class="btn btn-success active" style="color:white;font-size:15px;margin:15px 0;text-shadow:none;" /></td>

    </tr>
        @*<tr style="height:40px">
            <td> Họ tên khách hàng:</td>
            <td style="font-weight:bold"> @kh.HoTen </td>
        </tr>

        <tr style="height:40px">
            <td> Địa chỉ:</td>
            <td style="font-weight:bold"> @kh.DiaChi </td>
        </tr>

        <tr style="height:40px">
            <td> Điện thoại:</td>
            <td style="font-weight:bold"> @kh.DienThoai </td>
        </tr>

        <tr style="height:40px">
            <td> Email:</td>
            <td style="font-weight:bold"> @kh.Email </td>
        </tr>

        <tr style="height:40px">
            <td> Ngày đặt:</td>
            <td style="font-weight:bold"> @DateTime.Now.ToShortDateString() </td>
        </tr>

        <tr style="height:40px">
            <td> Ngày giao:</td>
            <td style="font-weight:bold">
                <input type="date" name="NgayGiao" />
            </td>
        </tr>

        <tr style="height:40px">
            <td> Ghi chú:</td>
            <td style="font-weight:bold">
                <input type="text" name="GhiChu" />
            </td>
        </tr>

        <tr style="height:40px">
            <td></td>
            <td>
                <input type="Submit" value="Đồng ý đặt hàng" />
            </td>
        </tr>*@
    }
</table>